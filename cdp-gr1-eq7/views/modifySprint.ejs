<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script defer src="../backend/listSprints.js"></script>
    <meta name="author" content="gr1_eq7" />
</head>

<body>
    <%- include ../views/partials/header.ejs %>
    <div class="row">
        <% include ./projectSidebar %>
        <div class="col-9">
            <br>
            <h1>Modify Sprints</h1>
            <hr>
            <form action="/modifySprint" method="post">
                <div id="addNewSprint" class="card form-group">
                    <h5 class="card-header" id="headingAddSprint">
                        <i class="fa fa-chevron-down pull-right"></i>
                        <div class="form-row form-inline">
                            <label class="col-form-label" for="sprintName">
                                Sprint
                            </label>
                        </div>
                    </h5>

                    <div id="collapseAddSprint" class="collapse show" role="tabpanel"
                        aria-labelledby="headingAddSprint">
                        <div class="card-body">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <label class="col-form-label" for="sprintObjective"><strong> Sprint Objective :
                                        </strong></label>
                                    <textarea class="form-control" id="sprintObjective" type="text"
                                        name="sprintObjective"
                                        required><%= sprint.objective %></textarea>
                                </li>

                                <li class="list-group-item">
                                    <label class="col-form-label"><strong> Issues to finish : </strong></label>
                                    <br>
                                    <select multiple class="form-control" id="sprintIssue" name="sprintIssue">
                                        <% projectIssues.forEach(issue => { %>
                                        <option value="<%= issue.id %>" <% if(sprintIssues.includes(issue.id)){%>
                                            selected <% } %> > <%= issue.name %></option>
                                        <% }) %>
                                    </select>
                                </li>


                                <li class="list-group-item">
                                    <div class="form-group row">
                                        <label for="example-date-input" class="col-2 col-form-label">Sprint start on
                                            :</label>
                                        <div class="col-4">
                                            <input class="form-control" type="date" id="date_begin" name="date_begin" 
                                            <%
                                                let yearStart = sprint.date_begin.getFullYear()
                                                let monthStart = sprint.date_begin.getMonth() + 1
                                                let dayStart = sprint.date_begin.getDate()
                                                %> value="<%= yearStart %>-<% if(monthStart < 10){%>0<%}%><%= monthStart%>-<% if(dayStart < 10){%>0<%}%><%= dayStart%>" required>
                                        </div>
                                        <label for="example-date-input" class="col-2 col-form-label">Sprint end on
                                            :</label>
                                        <div class="col-4">
                                            <input class="form-control" type="date" id="date_end" name="date_end"
                                            <%
                                                let yearEnd = sprint.date_end.getFullYear()
                                                let monthEnd = sprint.date_end.getMonth()  + 1
                                                let dayEnd = sprint.date_end.getDate()
                                            %> value="<%= yearEnd %>-<% if(monthEnd < 10){%>0<%}%><%= monthEnd%>-<% if(dayEnd < 10){%>0<%}%><%= dayEnd%>" required>
                                        </div>
                                    </div>
                                </li>

                                <li class="list-group-item">
                                    <button type="submit" href="" class="btn btn-outline-success float-right">
                                        &#10004;
                                    </button>
                                </li>

                            </ul>

                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</body>

</html>